tarif:
  titre: Tarif de transport
  description: Calcul du tarif de transport en fonction de votre situation
  ic√¥nes: üöå üí≥
  formule: 
    variations:
      - si: type voyage = 'occasionnel'
        alors: tarif occasionnel
      - si: type voyage = 'fr√©quent'
        alors: tarif fr√©quent
      - si: type voyage = 'scolaire'
        alors: 0

type voyage:
  question: Quel type de voyage souhaitez-vous effectuer ?
  par d√©faut: "'occasionnel'"
  suggestions:
    - "'occasionnel'"
    - "'fr√©quent'"
    - "'scolaire'"

# Tarifs occasionnels
tarif occasionnel:
  applicable si: type voyage = 'occasionnel'
  formule:
    variations:
      - si: type ticket = '1 voyage'
        alors: 2.10
      - si: type ticket = '2 voyages'
        alors: 3.60
      - si: type ticket = '10 voyages'
        alors: 
          variations:
            - si: tarif r√©duit
              alors: 8.40
            - sinon: 16.80

type ticket:
  question: Quel type de ticket souhaitez-vous ?
  par d√©faut: "'1 voyage'"
  applicable si: type voyage = 'occasionnel'
  suggestions:
    - "'1 voyage'"
    - "'2 voyages'"
    - "'10 voyages'"

tarif r√©duit:
  applicable si:
    toutes ces conditions:
      - type voyage = 'occasionnel'
      - type ticket = '10 voyages'
  formule:
    une de ces conditions:
      - √©tudiant = 'oui'
      - famille nombreuse = 'oui'
      - militaire = 'oui'
      - carte combattant = 'oui'
      - service civique = 'oui'
  description: Les tarifs r√©duits s'appliquent aux √©tudiants, familles nombreuses, militaires, titulaires de la carte du combattant et personnes en service civique

√©tudiant:
  question: √ätes-vous √©tudiant ?
  par d√©faut: "'non'"
  applicable si: type ticket = '10 voyages'
  suggestions:
    - "'oui'"
    - "'non'"

militaire:
  question: √ätes-vous militaire ?
  par d√©faut: "'non'"
  applicable si: type ticket = '10 voyages'
  suggestions:
    - "'oui'"
    - "'non'"

carte combattant:
  question: √ätes-vous titulaire d'une carte du combattant ?
  par d√©faut: "'non'"
  suggestions:
    - "'oui'"
    - "'non'"

service civique:
  question: √ätes-vous en service civique ?
  par d√©faut: "'non'"
  applicable si: type ticket = '10 voyages'
  suggestions:
    - "'oui'"
    - "'non'"

famille nombreuse:
  question: Avez-vous le statut de famille nombreuse ?
  par d√©faut: "'non'"
  applicable si: type ticket = '10 voyages'
  description: "Famille nombreuse = 3 enfants de moins de 18 ans dans le foyer, ou carte SNCF Famille Nombreuse, ou 5 enfants dans le foyer"
  suggestions:
    - "'oui'"
    - "'non'"

# R√®gles de gratuit√© - d√©finir cela comme un point d'entr√©e s√©par√©
gratuit√©:
  formule:
    une de ces conditions:
      - situation handicap >= 50
      - carte combattant = 'oui'
      - quotient familial <= 555

# Tarifs fr√©quents
tarif fr√©quent:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: gratuit√©
        alors: 0  # Gratuit√© compl√®te
      - si: tranche solidaire = 'tranche 2'
        alors: tarif solidaire 50
      - si: tranche solidaire = 'tranche 3'
        alors: tarif solidaire 30
      - sinon: tarif standard

tarif standard:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: √¢ge < 5
        alors: 0  # Gratuit pour les moins de 5 ans
      - si: 
          toutes ces conditions:
            - √¢ge >= 5
            - √¢ge <= 10
        alors: tarif pitchoun
      - si: 
          toutes ces conditions:
            - √¢ge >= 11
            - √¢ge <= 27
        alors: tarif jeune
      - si: 
          toutes ces conditions:
            - √¢ge >= 28
            - √¢ge < 60
            - salari√© entreprise partenaire = 'oui'
        alors: tarif salari√©
      - si:
          toutes ces conditions:
            - √¢ge >= 28
            - √¢ge < 60
            - salari√© entreprise partenaire = 'non'
        alors: tarif classique
      - si: √¢ge >= 60
        alors: tarif senior

tarif pitchoun:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: p√©riodicit√© = 'mensuel'
        alors: 12.20
      - si: p√©riodicit√© = 'annuel'
        alors: 146.40

tarif jeune:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: p√©riodicit√© = 'mensuel'
        alors: 20.80
      - si: p√©riodicit√© = 'annuel'
        alors: 249.60

tarif classique:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: p√©riodicit√© = 'mensuel'
        alors: 44.40
      - si: p√©riodicit√© = 'annuel'
        alors: 532.80

tarif senior:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: p√©riodicit√© = 'mensuel'
        alors: 32.00
      - si: p√©riodicit√© = 'annuel'
        alors: 384.00

tarif salari√©:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: p√©riodicit√© = 'mensuel'
        alors: 35.50
      - si: p√©riodicit√© = 'annuel'
        alors: 426.00

# Tarifs solidaires
tarif solidaire 50:
  applicable si: 
    toutes ces conditions:
      - type voyage = 'fr√©quent'
      - tranche solidaire = 'tranche 2'
  formule:
    variations:
      - si: 
          toutes ces conditions:
            - √¢ge >= 5
            - √¢ge <= 10
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 6.10
            - si: p√©riodicit√© = 'annuel'
              alors: 73.20
      - si: 
          toutes ces conditions:
            - √¢ge >= 11
            - √¢ge <= 27
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 10.40
            - si: p√©riodicit√© = 'annuel'
              alors: 124.80
      - si:
          toutes ces conditions:
            - √¢ge >= 28
            - √¢ge < 60
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 22.20
            - si: p√©riodicit√© = 'annuel'
              alors: 266.40
      - si: √¢ge >= 60
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 16.00
            - si: p√©riodicit√© = 'annuel'
              alors: 192.00

tarif solidaire 30:
  applicable si:
    toutes ces conditions:
      - type voyage = 'fr√©quent'
      - tranche solidaire = 'tranche 3'
  formule:
    variations:
      - si: 
          toutes ces conditions:
            - √¢ge >= 5
            - √¢ge <= 10
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 8.50
            - si: p√©riodicit√© = 'annuel'
              alors: 102.00
      - si: 
          toutes ces conditions:
            - √¢ge >= 11
            - √¢ge <= 27
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 14.60
            - si: p√©riodicit√© = 'annuel'
              alors: 175.20
      - si:
          toutes ces conditions:
            - √¢ge >= 28
            - √¢ge < 60
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 31.10
            - si: p√©riodicit√© = 'annuel'
              alors: 373.20
      - si: √¢ge >= 60
        alors:
          variations:
            - si: p√©riodicit√© = 'mensuel'
              alors: 22.40
            - si: p√©riodicit√© = 'annuel'
              alors: 268.80

p√©riodicit√©:
  question: Quelle est la p√©riodicit√© de votre abonnement ?
  par d√©faut: "'mensuel'"
  applicable si: type voyage = 'fr√©quent'
  suggestions:
    - "'mensuel'"
    - "'annuel'"

√¢ge:
  question: Quel est votre √¢ge ?
  par d√©faut: 30
  suggestions:
    enfant: 8
    jeune: 18
    adulte: 35
    senior: 65

quotient familial:
  question: Quel est votre quotient familial ?
  par d√©faut: 1000
  description: Montant fourni par la CAF ou calcul√© √† partir de vos revenus

tranche solidaire:
  applicable si: type voyage = 'fr√©quent'
  formule:
    variations:
      - si: quotient familial <= 555
        alors: "'tranche 1'"
      - si: quotient familial <= 775
        alors: "'tranche 2'"
      - si: quotient familial <= 970
        alors: "'tranche 3'"
      - sinon: "'aucune'"

situation handicap:
  question: Quel est votre taux d'incapacit√© (handicap) ?
  par d√©faut: 0
  description: Taux d'incapacit√© en pourcentage (0 si aucun handicap)
  suggestions:
    aucun: 0
    taux faible: 30
    taux moyen: 45
    taux √©lev√©: 70

salari√© entreprise partenaire:
  question: √ätes-vous salari√© d'une entreprise partenaire TBM ?
  par d√©faut: "'non'"
  applicable si: 
    toutes ces conditions:
      - type voyage = 'fr√©quent'
      - √¢ge >= 28
      - √¢ge < 60
  suggestions:
    - "'non'"
    - "'oui'"
  description: Les salari√©s des entreprises partenaires TBM b√©n√©ficient d'un tarif pr√©f√©rentiel